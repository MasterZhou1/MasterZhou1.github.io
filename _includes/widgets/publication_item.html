<style>
  .custom-img-size {
    width: 100%; /* Make image responsive */
    height: auto; /* Maintain aspect ratio */
    max-width: 150px; /* Set a maximum width for the image */
    object-fit: contain; /* Ensures the entire image is visible without cropping */
    background-color: #f8f8f8; /* Add a background color if needed for a border-like effect */
  }

  .item-container {
    display: flex;
    align-items: center;
    gap: 1rem; /* Adds space between image and text */
    padding: 1rem; /* Add some padding for better spacing */
  }

  .text-container {
    flex: 1; /* Allow text container to take up available space */
  }
</style>

{% assign item = include.item %}
<div class="d-none d-md-block">
  <div class="row no-gutters {% unless include.hide_bottom_border %}border-bottom{% endunless %} border-gray">
    <div class="col-md-12 item-container">
      <div class="col-md-3 col-xl-2">
        {%- if item.cover -%}
        <img data-src="{{ item.cover | relative_url }}" alt="{{ item.title }}" class="lazy rounded-sm custom-img-size" src="{{ '/assets/images/empty_300x200.png' | relative_url }}">
        {%- else -%}
        <svg class="bubble-visual-hash lazy custom-img-size" data-bubble-visual-hash="{{ item.id }}" viewBox="0 0 300 200"></svg>
        {%- endif -%}
      </div>
      <div class="col-md-9 col-xl-10 text-container">
        <h5 class="mt-0 mb-1 font-weight-normal">{{ item.title }}</h5>
        <p class="mt-0 mb-0 small">{% include widgets/author_list.html authors=item.authors %}</p>
        <p class="mt-0 mb-0 small">{{ item.pub_pre }}<i>{{ item.pub }}</i>{{ item.pub_post }} {{ item.pub_date }} {{ item.pub_last }}</p>
        <p class="mt-0 mb-0 small text-muted">{{ item.abstract }}</p>

        <p class="small pb-0 mb-0 lh-125 text-muted abstract-links">
          {% for link in item.links %}
          {% if link[1].url %}
          <a target="{{ link[1]['target'] }}" href="{{ link[1]['url'] }}">[{{ link[0] }}]</a>
          {% else %}
          <a target="_blank" href="{{ link[1] }}">[{{ link[0] }}]</a>
          {% endif %}
          {% endfor %}
          {% if item.bib %}
          <a href="javascript:void(0)" onclick="showBibTeX('desktop-{{ item.id }}')">[BibTeX]</a>
          {% endif %}
        </p>
      </div>
    </div>
  </div>
</div>

<!-- BibTeX Modal (Desktop) -->
<div id="bibtex-modal-desktop-{{ item.id }}" class="bibtex-modal">
  <div class="bibtex-modal-content">
    <span class="bibtex-close" onclick="closeBibTeX('{{ item.id }}')">&times;</span>
    <div class="bibtex-header">
      <h5>BibTeX Citation</h5>
    </div>
    <div class="bibtex-body">
      <div class="bibtex-content" id="bibtex-content-desktop-{{ item.id }}">
        {{- item.bib | strip 
          | replace: '\n        ', '\n' 
          | replace: '\n      ', '\n' 
          | replace: '\n    ', '\n' 
          | replace: '\n  ', '\n' 
          | replace: '\n\n', '\n' -}}
      </div>
      <div style="margin-top: 15px;">
        <button class="copy-bibtex-btn" onclick="copyBibTeX('desktop-{{ item.id }}')">Copy BibTeX</button>
        <span id="copy-success-desktop-{{ item.id }}" class="copy-success" style="display: none;">Copied!</span>
      </div>
    </div>
  </div>
</div>

<div class="row no-gutters d-md-none {% unless include.hide_bottom_border %}border-bottom{% endunless %} border-gray {% if include.first %}rounded-top{% endif %} {% if include.last %}rounded-bottom{% endif %} {% if item.cover %}lazy{% endif %}" data-src="{{ item.cover | relative_url }}">
  <div class="w-100" style="background-color: rgba(255,255,255,0.9);">
    <div class="d-flex align-items-start flex-column py-3 px-4">
      <div class="mb-auto"></div>
      <div>
        <h5 class="mt-0 mb-1 font-weight-normal">{{ item.title }}</h5>
        <p class="mt-0 mb-0 small">{% include widgets/author_list.html authors=item.authors %}</p>
        <p class="mt-0 mb-0 small">{{ item.pub_pre }}<i>{{ item.pub }}</i>{{ item.pub_post }} {{ item.pub_date }} {{ item.pub_last }}</p>
        <p class="mt-0 mb-0 small text-muted">{{ item.abstract }}</p>

        <p class="small pb-0 mb-0 lh-125 text-muted abstract-links">
          {% for link in item.links %}
          {% if link[1].url %}
          <a target="{{ link[1]['target'] }}" href="{{ link[1]['url'] }}">[{{ link[0] }}]</a>
          {% else %}
          <a target="_blank" href="{{ link[1] }}">[{{ link[0] }}]</a>
          {% endif %}
          {% endfor %}
          {% if item.bib %}
          <a href="javascript:void(0)" onclick="showBibTeX('mobile-{{ item.id }}')">[BibTeX]</a>
          {% endif %}
        </p>
      </div>
    </div>
  </div>
</div>

<!-- BibTeX Modal (Mobile) -->
<div id="bibtex-modal-mobile-{{ item.id }}" class="bibtex-modal">
  <div class="bibtex-modal-content">
    <span class="bibtex-close" onclick="closeBibTeX('{{ item.id }}')">&times;</span>
    <div class="bibtex-header">
      <h5>BibTeX Citation</h5>
    </div>
    <div class="bibtex-body">
      <div class="bibtex-content" id="bibtex-content-mobile-{{ item.id }}">
        {{- item.bib | strip 
          | replace: '\n        ', '\n' 
          | replace: '\n      ', '\n' 
          | replace: '\n    ', '\n' 
          | replace: '\n  ', '\n' 
          | replace: '\n\n', '\n' -}}
      </div>
      <div style="margin-top: 15px;">
        <button class="copy-bibtex-btn" onclick="copyBibTeX('mobile-{{ item.id }}')">Copy BibTeX</button>
        <span id="copy-success-mobile-{{ item.id }}" class="copy-success" style="display: none;">Copied!</span>
      </div>
    </div>
  </div>
</div>
